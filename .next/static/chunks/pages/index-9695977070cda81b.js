(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{2766:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(1094)}])},1094:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var s=a(4246),n=a(7378),r=a(8038),o=a.n(r),l=e=>{let{addExpense:t,onSuccess:a}=e,[r,o]=(0,n.useState)(""),[l,i]=(0,n.useState)(""),[c,d]=(0,n.useState)("");return(0,s.jsxs)("form",{className:"formStyle",onSubmit:e=>{e.preventDefault(),r&&l&&(t({item:r,amount:parseFloat(l),date:c?new Date(c).toLocaleDateString():new Date().toLocaleDateString()}),o(""),i(""),d(""),a())},children:[(0,s.jsxs)("div",{className:"formGroupStyle",children:[(0,s.jsx)("label",{htmlFor:"item",className:"labelStyle",children:"Expense:"}),(0,s.jsx)("input",{type:"text",id:"item",value:r,onChange:e=>o(e.target.value),className:"inputStyle",placeholder:"Enter expense item"})]}),(0,s.jsxs)("div",{className:"formGroupStyle",children:[(0,s.jsx)("label",{htmlFor:"amount",className:"labelStyle",children:"Amount:"}),(0,s.jsx)("input",{type:"number",id:"amount",value:l,onChange:e=>i(e.target.value),className:"inputStyle",placeholder:"Enter amount"})]}),(0,s.jsxs)("div",{className:"formGroupStyle",children:[(0,s.jsx)("label",{htmlFor:"date",className:"labelStyle",children:"Date:"}),(0,s.jsx)("input",{type:"date",id:"date",value:c,onChange:e=>d(e.target.value),className:"inputStyle"})]}),(0,s.jsx)("button",{type:"submit",className:"buttonStyle",children:"Add Expense"})]})},i=a(6740),c=e=>{let{expenses:t}=e,a=e=>e.sort((e,t)=>new Date(e.date)-new Date(t.date)),n=(e=>{let t=a(e),s=[...new Set(t.map(e=>e.date))],n=t.filter(e=>e.date===s[s.length-1]),r=[...new Set(n.map(e=>e.item))],o=[];for(let e of r)o.push({item:e,amount:t.filter(t=>t.item===e&&t.date===s[s.length-1]).map(e=>Number(e.amount)).reduce((e,t)=>e+t,0),date:(0,i.dateFormat)(s[s.length-1])});return o})(t);return 0===n.length?null:(0,s.jsxs)("div",{className:"formStyle",children:[(0,s.jsx)("h2",{children:"Today's Expenses"}),(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"listStyle l2",children:[(0,s.jsx)("th",{children:"Item"}),(0,s.jsx)("th",{children:"Amount"}),(0,s.jsx)("th",{children:"Date"})]})}),(0,s.jsx)("tbody",{children:n.map((e,t)=>(0,s.jsxs)("tr",{className:"itemStyle",children:[(0,s.jsx)("td",{className:"one",children:e.item}),(0,s.jsx)("td",{className:"two",children:e.amount}),(0,s.jsx)("td",{className:"one",children:e.date})]},t))})]})]})},d=e=>{let{dailyTotal:t,overallTotal:a}=e;return(0,s.jsxs)("div",{className:"formStyle",children:[(0,s.jsx)("h2",{className:"headingStyle",children:"Totals"}),(0,s.jsxs)("ul",{className:"listStyle",children:[(0,s.jsxs)("li",{className:"itemStyle",children:["Daily Total: ",(0,s.jsxs)("span",{children:["$",t.toFixed(2)]})]}),(0,s.jsxs)("li",{className:"itemStyle",children:["Overall Total:",(0,s.jsxs)("span",{children:[" $",a.toFixed(2)]})]})]})]})};function x(e){let{expenses:t}=e,a=(0,i.dailyExpenseData)(t);return 0===a.length?null:(0,s.jsxs)("div",{className:"formStyle",children:[(0,s.jsx)("h2",{children:"Datewise Expenses"}),(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"itemStyle",children:[(0,s.jsx)("th",{children:"Date"}),(0,s.jsx)("th",{children:"Total Amount"})]})}),(0,s.jsx)("tbody",{children:a.map((e,t)=>(0,s.jsxs)("tr",{className:"itemStyle",children:[(0,s.jsx)("td",{children:(0,i.dateFormat)(e.date)}),(0,s.jsx)("td",{children:e.amount})]},t))})]})]})}var m=e=>{let{expenses:t}=e,a=(0,i.dailyExpenseCategory)(t);return 0===a.length?null:(0,s.jsxs)("div",{className:"formStyle",children:[(0,s.jsx)("h2",{children:"Item Wise Expenses"}),(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"listStyle l2",children:[(0,s.jsx)("th",{children:"Item"}),(0,s.jsx)("th",{children:"Amount"})]})}),(0,s.jsx)("tbody",{children:a.map((e,t)=>(0,s.jsxs)("tr",{className:"itemStyle",children:[(0,s.jsx)("td",{className:"one",children:e.cat}),(0,s.jsx)("td",{className:"two",children:e.amount})]},t))})]})]})},p=a(8164),u=a.n(p),h=e=>{let{addExpense:t}=e,[a,r]=(0,n.useState)(!1),o=()=>{r(!a)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{onClick:o,"aria-hidden":!a,className:"jsx-9df9a43aae5e3f1c "+"overlay ".concat(a?"show":"")}),(0,s.jsx)("button",{onClick:o,"aria-label":"Add Expense",className:"jsx-9df9a43aae5e3f1c floating-button",children:"+"}),(0,s.jsxs)("div",{className:"jsx-9df9a43aae5e3f1c "+"form-popup ".concat(a?"show":""),children:[(0,s.jsx)("button",{onClick:o,"aria-label":"Close Form",className:"jsx-9df9a43aae5e3f1c close-button",children:"\xd7"}),(0,s.jsx)(l,{addExpense:t,onSuccess:()=>{r(!1)}})]}),(0,s.jsx)(u(),{id:"9df9a43aae5e3f1c",children:".floating-button.jsx-9df9a43aae5e3f1c{position:fixed;bottom:20px;right:20px;width:60px;height:60px;background-color:#28a745;color:white;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;border:2px solid#28a745;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-shadow:0px 4px 8px rgba(0,0,0,.3);-moz-box-shadow:0px 4px 8px rgba(0,0,0,.3);box-shadow:0px 4px 8px rgba(0,0,0,.3);cursor:pointer;z-index:1000;font-size:20px;-webkit-transition:-webkit-transform.3s ease;-moz-transition:-moz-transform.3s ease;-o-transition:-o-transform.3s ease;transition:-webkit-transform.3s ease;transition:-moz-transform.3s ease;transition:-o-transform.3s ease;transition:transform.3s ease}.floating-button.jsx-9df9a43aae5e3f1c:focus{outline:none;-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1);border-color:#218838}.form-popup.jsx-9df9a43aae5e3f1c{position:fixed;bottom:120px;right:30px;width:80%;max-width:400px;background-color:white;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0px 4px 8px rgba(0,0,0,.3);-moz-box-shadow:0px 4px 8px rgba(0,0,0,.3);box-shadow:0px 4px 8px rgba(0,0,0,.3);z-index:999;display:none;opacity:0;-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-ms-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px);-webkit-transition:opacity.3s ease,-webkit-transform.3s ease;-moz-transition:opacity.3s ease,-moz-transform.3s ease;-o-transition:opacity.3s ease,-o-transform.3s ease;transition:opacity.3s ease,-webkit-transform.3s ease;transition:opacity.3s ease,-moz-transform.3s ease;transition:opacity.3s ease,-o-transform.3s ease;transition:opacity.3s ease,transform.3s ease}.form-popup.show.jsx-9df9a43aae5e3f1c{display:block;opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-ms-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}.overlay.jsx-9df9a43aae5e3f1c{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:998;display:none;opacity:0;-webkit-transition:opacity.3s ease;-moz-transition:opacity.3s ease;-o-transition:opacity.3s ease;transition:opacity.3s ease}.overlay.show.jsx-9df9a43aae5e3f1c{display:block;opacity:1}.close-button.jsx-9df9a43aae5e3f1c{position:absolute;top:10px;right:10px;background:transparent;border:none;font-size:24px;cursor:pointer;z-index:1001}.close-button.jsx-9df9a43aae5e3f1c:focus{outline:none}"})]})},f=a(6482);let y="my-expenses",b=async()=>{let e=await (0,f.X3)("my-database",1,{upgrade(e){e.objectStoreNames.contains(y)||e.createObjectStore(y,{autoIncrement:!0})}});return e},j=async e=>{let t=await b(),a=t.transaction(y,"readwrite"),s=a.objectStore(y);await s.add(e),await a.done},w=async()=>{let e=await b(),t=e.transaction(y,"readonly"),a=t.objectStore(y),s=await a.getAll();return await t.done,s};var g=()=>{let[e,t]=(0,n.useState)([]),[a,r]=(0,n.useState)(0),[p,u]=(0,n.useState)(0),[f,y]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=async()=>{let e=await w();t(e),y(e)};e()},[]),(0,n.useEffect)(()=>{r((0,i.dailyTotalAmountFn)(e)),u((0,i.overallTotalAmountFn)(e))},[e]);let b=async a=>{await j(a),t([...e,a])};return 0===e.length?(0,s.jsx)(()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{children:"Expense Tracker"}),(0,s.jsx)(l,{addExpense:b,onSuccess:()=>{}})]}),{}):(0,s.jsxs)("div",{children:[(0,s.jsxs)(o(),{children:[(0,s.jsx)("title",{children:"Expense Tracker"}),(0,s.jsx)("link",{rel:"manifest",href:"/manifest.json"})]}),(0,s.jsx)("h1",{children:"Expense Tracker"}),(0,s.jsx)(d,{dailyTotal:a,overallTotal:p}),(0,s.jsx)(c,{expenses:e}),(0,s.jsx)(x,{expenses:e}),(0,s.jsx)(m,{expenses:e}),(0,s.jsx)(h,{addExpense:b})]})}},6740:function(e){let t=JSON.stringify;e.exports={dailyTotalAmountFn:e=>{let t=new Date().toLocaleDateString();return e.filter(e=>{let{date:a}=e;return a===t}).reduce((e,t)=>{let{amount:a}=t;return e+a},0)},overallTotalAmountFn:e=>e.reduce((e,t)=>{let{amount:a}=t;return e+a},0),dailyExpenseData:e=>{let t=new Map;return e.forEach(e=>{let{date:a,amount:s}=e;t.set(a,(t.get(a)||0)+s)}),Array.from(t,e=>{let[t,a]=e;return{date:t,amount:a}})},dailyExpenseCategory:e=>{let t=new Map;return e.forEach(e=>{let{item:a,amount:s}=e;t.set(a,(t.get(a)||0)+Number(s))}),Array.from(t,e=>{let[t,a]=e;return{cat:t,amount:a}})},jsonString:t,dateFormat:e=>new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"short",year:"2-digit"}).format(new Date(e)),exportToJsonFile:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data.json",a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=document.createElement("a");s.download=t,s.href=URL.createObjectURL(a),s.click()}}}},function(e){e.O(0,[777,774,888,179],function(){return e(e.s=2766)}),_N_E=e.O()}]);